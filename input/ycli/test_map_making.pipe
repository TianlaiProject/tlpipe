# -*- mode: python; -*-
#

import os

from tlpipe.map import dirtymap


data_base = os.getenv('DATA_BASE')

#sim_type = 'fnoise_beta0.0'
#sim_type = 'HI_tf'
#sim_type = 'HI_tf_v5m'
#sim_type = 'wigglez_syn_fnoise_beta0.5'
#sim_type = 'wigglez_HI'
#sim_type = 'wigglez_HI_nobeam'
#sim_type = 'wigglez_HI_fackf'
sim_type = 'wigglez_HI_corr'
#sim_type = 'wigglez_syn'

pipe_tasks = []
pipe_outdir = data_base + 'meerkat/sim_%s/'%sim_type
pipe_logging = 'info'
pipe_copy = False

data_path = data_base + '/meerkat/sim/'

method = 'freq'

#file_name = '1474580092'

input_files = [
    #'MeerKAT3_HorizonRasterDrift_20181110165136.h5',
    #'MeerKAT3_HorizonRasterDrift_20181110221536.h5',
    #'MeerKAT3_HorizonRasterDrift_20181111164648.h5',
    #'MeerKAT3_HorizonRasterDrift_20181111221648.h5',
    #'MeerKAT3_HorizonRasterDrift_20181112164800.h5',
    #'MeerKAT3_HorizonRasterDrift_20181112221200.h5',
    #'MeerKAT3_HorizonRasterDrift_20181113164312.h5',
    #'MeerKAT3_HorizonRasterDrift_20181113220712.h5',
    #'MeerKAT3_HorizonRasterDrift_20181114163824.h5',
    #'MeerKAT3_HorizonRasterDrift_20181114220824.h5',

    'MeerKAT3_HorizonRasterDrift_20181127155700.h5',
    'MeerKAT3_HorizonRasterDrift_20181127213900.h5',
    'MeerKAT3_HorizonRasterDrift_20181128155230.h5',
    'MeerKAT3_HorizonRasterDrift_20181128214030.h5',
    'MeerKAT3_HorizonRasterDrift_20181129154800.h5',
    'MeerKAT3_HorizonRasterDrift_20181129213600.h5',
    'MeerKAT3_HorizonRasterDrift_20181130154930.h5',
    'MeerKAT3_HorizonRasterDrift_20181130213130.h5',

    ]
#file_name = 'sim_meerKAT3_AZdrift_noise_inv_weight'
file_name = 'sim_meerKAT3_HorizonRasterDrift_shift_GBT'

pipe_tasks.append(dirtymap.DirtyMap_GBT)

dm_field_centre = (32.5, -2)
dm_pixel_spacing = 0.4
dm_map_shape = [100, 20]
dm_interpolation = 'linear'
#dm_interpolation = 'nearest'
#dm_interpolation = 'cubic'
dm_tblock_len = 180 * 20
dm_input_files  = ['sim/%s'%f for f in input_files]
dm_output_files = ['maps_test/%s'%file_name, ]
dm_data_sets    = 'vis'
dm_freq_select  = (0, None) #(0, None)
dm_pol_select   = (0, 2)
dm_deweight_time_slop = False
dm_deweight_time_mean = True
#dm_data_sets    = 'vis_sub00modes'
#dm_data_sets    = 'vis_sub05modes'

